<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta name="theme-color" content="#4CAF50">
   <meta name="apple-mobile-web-app-capable" content="yes">
   <meta name="apple-mobile-web-app-status-bar-style" content="default">
   <meta name="mobile-web-app-capable" content="yes">
   <title>Budget Tracker</title>
   <link rel="manifest" href="manifest.json">
   <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üí∞</text></svg>">
   <link rel="stylesheet" href="styles.css">
</head>
<body>
   <div id="auth-container">
       <div class="auth-card">
           <h1>üí∞ Budget Tracker</h1>
           <button id="sign-in-btn">Sign in with Google</button>
       </div>
   </div>

   <div id="app-container" style="display: none;">
       <header>
           <h1>üí∞ Budget Tracker</h1>
           <button id="sign-out-btn">Sign Out</button>
       </header>

       <nav class="tabs">
           <button class="tab-btn active" data-tab="add">Add</button>
           <button class="tab-btn" data-tab="history">History</button>
           <button class="tab-btn" data-tab="budget">Budget</button>
           <button class="tab-btn" data-tab="trends">Trends</button>
       </nav>

       <div id="add-tab" class="tab-content active">
           <div style="margin-bottom: 1rem;">
               <button type="button" id="import-csv-btn" style="background: #2196F3; width: 100%;">üìÅ Import CSV</button>
               <input type="file" id="csv-file-input" accept=".csv" style="display: none;">
           </div>
           
           <form id="transaction-form">
               <label>Date</label>
               <input type="date" id="transaction-date" required>

               <label>Category</label>
               <select id="transaction-category" required>
                   <option value="">Select Category</option>
                   <option value="__new__">+ Add New Category</option>
               </select>
               <input type="text" id="new-category-input" style="display: none;" placeholder="Enter new category">

               <label>Place</label>
               <input type="text" id="transaction-place" required>

               <label>Amount</label>
               <input type="number" id="transaction-amount" step=".01" value="0" required>

               <label>Person</label>
               <select id="transaction-person" required>
                   <option value="Roger">Roger</option>
                   <option value="Raegan">Raegan</option>
                   <option value="Both">Both</option>
               </select>

               <label>Notes (Optional)</label>
               <textarea id="transaction-notes"></textarea>

               <button type="submit">Add Transaction</button>
           </form>
           
           <div id="import-preview" style="display: none; margin-top: 2rem; background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
               <h3>Import Preview</h3>
               <p id="preview-count"></p>
               <div id="preview-list" style="max-height: 300px; overflow-y: auto; margin: 1rem 0;"></div>
               <button type="button" id="confirm-import-btn" style="background: #4CAF50; margin-right: 0.5rem;">Import All</button>
               <button type="button" id="cancel-import-btn" style="background: #f44336;">Cancel</button>
           </div>
       </div>

       <div id="history-tab" class="tab-content">
           <div class="month-selector">
               <select id="history-month-select"></select>
           </div>
           <div id="history-content"></div>
       </div>

       <div id="budget-tab" class="tab-content">
           <div id="budget-reminder"></div>
           <div class="month-selector">
               <select id="budget-month-select"></select>
           </div>
           <div id="budget-content"></div>
       </div>

       <div id="trends-tab" class="tab-content">
           <div id="trends-content"></div>
       </div>
   </div>

   <script type="module" src="firebase-config.js"></script>
   <script type="module" src="app.js"></script>
</body>
</html>
